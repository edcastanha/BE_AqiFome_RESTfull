============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.4.1, pluggy-1.6.0
rootdir: /home/edson/repos/BE_AqiFome_RESTfull
plugins: anyio-4.9.0, cov-6.2.1, asyncio-1.0.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 34 items

tests/core/domain/test_cliente.py .......                                [ 20%]
tests/core/domain/test_favorito.py ......                                [ 38%]
tests/core/repository/test_cliente_repository.py ........                [ 61%]
tests/core/repository/test_favorito_repository.py ......                 [ 79%]
tests/core/service/test_cliente_service.py ..                            [ 85%]
tests/core/service/test_favorito_service.py .....                        [100%]

=============================== warnings summary ===============================
venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
  /home/edson/repos/BE_AqiFome_RESTfull/venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
    from crypt import crypt as _crypt

tests/core/repository/test_cliente_repository.py::test_create_cliente
  /home/edson/repos/BE_AqiFome_RESTfull/core/repository/cliente_repository.py:37: PydanticDeprecatedSince20: The `from_orm` method is deprecated; set `model_config['from_attributes']=True` and use `model_validate` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    return Cliente.from_orm(db_cliente)

tests/core/repository/test_cliente_repository.py::test_get_by_id_found
  /home/edson/repos/BE_AqiFome_RESTfull/core/repository/cliente_repository.py:49: PydanticDeprecatedSince20: The `from_orm` method is deprecated; set `model_config['from_attributes']=True` and use `model_validate` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    return Cliente.from_orm(db_cliente) if db_cliente else None

tests/core/repository/test_cliente_repository.py::test_list_clientes
tests/core/repository/test_cliente_repository.py::test_list_clientes
  /home/edson/repos/BE_AqiFome_RESTfull/core/repository/cliente_repository.py:70: PydanticDeprecatedSince20: The `from_orm` method is deprecated; set `model_config['from_attributes']=True` and use `model_validate` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    return [Cliente.from_orm(c) for c in self.db.query(ClienteORM).all()]

tests/core/service/test_favorito_service.py::test_adicionar_favoritos_com_sucesso
  /home/edson/repos/BE_AqiFome_RESTfull/tests/core/service/test_favorito_service.py:29: PydanticDeprecatedSince20: `parse_obj_as` is deprecated. Use `pydantic.TypeAdapter.validate_python` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    Produto(id=1, titulo="P1 Cache", preco=10, imagem=parse_obj_as(HttpUrl, "http://img1.com/img01.png")), # P1

tests/core/service/test_favorito_service.py::test_adicionar_favoritos_com_sucesso
  /home/edson/repos/BE_AqiFome_RESTfull/tests/core/service/test_favorito_service.py:38: PydanticDeprecatedSince20: `parse_obj_as` is deprecated. Use `pydantic.TypeAdapter.validate_python` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    FavoritoResponse(id=1, cliente_id=1, produto=Produto(id=1, titulo="P1", preco=10, imagem=parse_obj_as(HttpUrl, "http://img1.com/img01.png"))),

tests/core/service/test_favorito_service.py::test_adicionar_favoritos_com_sucesso
  /home/edson/repos/BE_AqiFome_RESTfull/tests/core/service/test_favorito_service.py:39: PydanticDeprecatedSince20: `parse_obj_as` is deprecated. Use `pydantic.TypeAdapter.validate_python` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    FavoritoResponse(id=2, cliente_id=1, produto=Produto(id=2, titulo="P2", preco=20, imagem=parse_obj_as(HttpUrl, "http://img2.com/img02.png"))),

tests/core/service/test_favorito_service.py::test_adicionar_favoritos_sem_novos_favoritos
  /home/edson/repos/BE_AqiFome_RESTfull/tests/core/service/test_favorito_service.py:99: PydanticDeprecatedSince20: `parse_obj_as` is deprecated. Use `pydantic.TypeAdapter.validate_python` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    FavoritoResponse(id=1, cliente_id=1, produto=Produto(id=1, titulo="P1", preco=10, imagem=parse_obj_as(HttpUrl, "http://img1.com/img01.png")))

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                     Stmts   Miss  Cover   Missing
----------------------------------------------------------------------
core/__init__.py                             0      0   100%
core/config/__init__.py                      0      0   100%
core/config/db.py                            7      0   100%
core/config/settings.py                     35      4    89%   51-52, 66-67
core/domain/__init__.py                      0      0   100%
core/domain/cliente.py                      18      0   100%
core/domain/favorito.py                     20      0   100%
core/domain/produto.py                      10      0   100%
core/externos/fake_store_client.py          12      7    42%   8-14
core/repository/__init__.py                  0      0   100%
core/repository/cliente_orm.py               9      0   100%
core/repository/cliente_repository.py       39      2    95%   60-61
core/repository/favorito_orm.py              8      0   100%
core/repository/favorito_repository.py      26      0   100%
core/repository/produto_orm.py              16      5    69%   20-25
core/repository/produto_repository.py       24     12    50%   18, 24-25, 31-49
core/security/security.py                   44     26    41%   21, 27, 33-40, 47-51, 57-75
core/service/__init__.py                     0      0   100%
core/service/cliente_service.py             20      4    80%   48, 59, 71, 82
core/service/favorito_service.py            42      8    81%   44, 88-94
----------------------------------------------------------------------
TOTAL                                      330     68    79%
======================== 34 passed, 9 warnings in 2.97s ========================
