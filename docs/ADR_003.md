
## ADR 003: Modelagem de Dados para Clientes e Favoritos
### Título:
 Modelagem de Dados Relacional para Clientes e Favoritos
### Status:
 Proposta
### Contexto:
 Precisamos armazenar clientes e seus produtos favoritos, garantindo a unicidade do e-mail do cliente e a não duplicação de produtos na lista de favoritos de um cliente. O PostgreSQL é o banco de dados sugerido e é relacional.
### Decisão:
 Utilizar um modelo relacional com tabelas clientes e favoritos, com um relacionamento de um para muitos entre clientes e favoritos, e uma chave composta para garantir a unicidade do produto por cliente.
### Consequências:
#### Positivas:
 Integridade de dados garantida por restrições de banco de dados (unique, foreign key), consultas eficientes para relacionamentos, compatibilidade com PostgreSQL.
#### Negativas:
 Pode exigir joins para recuperar dados completos de favoritos, o que é padrão em DBs relacionais.


### Detalhes da Implementação:

0. **Tabela ModelBase**:
   - `id`: SERIAL PRIMARY KEY
   - `created_at`: TIMESTAMP DEFAULT CURRENT_TIMESTAMP
   - `updated_at`: TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

! obs.: as demais classes herdarão dessa classe base para manter consistência de timestamps.

1. **Tabela Clientes**:
   - `id`: SERIAL PRIMARY KEY
   - `nome`: VARCHAR(255) NOT NULL
   - `email`: VARCHAR(255) UNIQUE NOT NULL
   - UNIQUE (email)

2. **Tabela Favoritos**:
   - `id`: SERIAL PRIMARY KEY
   - `cliente_id`: INTEGER NOT NULL REFERENCES clientes(id)
   - `produto_id`: INTEGER NOT NULL
   - `titulo`: VARCHAR(255) NOT NULL
   - `imagem`: VARCHAR(255) NOT NULL
   - `preco`: DECIMAL(10, 2) NOT NULL
   - `review`: TEXT
   - UNIQUE (cliente_id, produto_id)